<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FashionDex</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="kh-bg-pattern"></div>
        <div class="login-container">
            <div class="corner-accent tl"></div>
            <div class="corner-accent tr"></div>
            <div class="corner-accent bl"></div>
            <div class="corner-accent br"></div>
            
            <div class="login-header">
                <div class="logo-crown">
                    <div class="crown-icon">üëë</div>
                    <div class="crown-glow"></div>
                </div>
                <h1 class="app-title">FASHIONDEX</h1>
                <p class="app-subtitle">Fashion Archive System</p>
            </div>
            
            <div class="login-form">
                <button class="google-btn" id="googleSignInBtn">
                    <svg class="google-icon" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Continue with Google
                </button>

                <div class="divider"><span>or</span></div>
                
                <div class="form-field">
                    <input type="email" id="loginUsername" placeholder="your@email.com">
                </div>
                <div class="form-field">
                    <input type="password" id="loginPassword" placeholder="Enter password">
                </div>
                
                <button class="login-btn" id="loginBtn">
                    <span id="loginBtnText">Sign In / Sign Up</span>
                    <span id="loginBtnLoader" class="loader hidden"></span>
                </button>
                <button class="guest-btn" id="guestBtn">Continue as Guest</button>
                
                <div class="login-hint">UStyle Database</div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-wrapper hidden" id="appWrapper">
        <div class="kh-bg-stars"></div>
        
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="bar-glow"></div>
            <div class="top-bar-left">
                <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
                <div class="logo-mini">
                    <div class="logo-shape"></div>
                </div>
                <span class="app-name">FASHIONDEX</span>
                <span class="version-badge">US</span>

                <!-- Bookmark Tabs -->
                <div class="bookmark-tabs" id="bookmarkTabs">
                    <button class="bookmark-tab active" data-page="database">
                        <span class="tab-icon">üìã</span>
                        <span class="tab-label">Database</span>
                    </button>
                    <button class="bookmark-tab" data-page="closet">
                        <span class="tab-icon">üëî</span>
                        <span class="tab-label">Closet</span>
                    </button>
                    <button class="bookmark-tab" data-page="social">
                        <span class="tab-icon">üåê</span>
                        <span class="tab-label">Social</span>
                    </button>
                    <button class="bookmark-tab" data-page="profile">
                        <span class="tab-icon">üë§</span>
                        <span class="tab-label">Profile</span>
                    </button>
                </div>
            </div>

            <div class="top-bar-center">
                <div class="entry-counter">
                    <span class="counter-current" id="counterCurrent">0</span>
                    <span class="counter-label">ENTRIES</span>
                </div>
            </div>
            
            <div class="top-bar-right">
                <button class="mobile-info-btn" id="mobileInfoBtn">‚Ñπ</button>
                <div class="user-info" id="userInfo">
                    <span class="user-role" id="userRole">Guest</span>
                    <span class="user-name" id="userName">Viewer</span>
                </div>
                <div class="style-selector-wrapper">
                    <div class="style-dropdown" id="styleDropdown">
                        <div class="style-current" id="styleCurrent">
                            <div class="theme-preview preview-default"></div>
                        </div>
                        <div class="style-options" id="styleOptions">
                            <div class="style-option" data-style="default">
                                <div class="theme-preview preview-default"></div>
                            </div>
                            <div class="style-option" data-style="cyberpunk">
                                <div class="theme-preview preview-cyberpunk"></div>
                            </div>
                            <div class="style-option" data-style="pokedex">
                                <div class="theme-preview preview-pokedex"></div>
                            </div>
                            <div class="style-option" data-style="gameboy">
                                <div class="theme-preview preview-gameboy"></div>
                            </div>
                            <div class="style-option" data-style="cozy">
                                <div class="theme-preview preview-cozy"></div>
                            </div>
                            <div class="style-option" data-style="console">
                                <div class="theme-preview preview-console"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="desktop-info-btn" id="desktopInfoBtn">‚Ñπ</button>
            <button class="logout-btn" id="logoutBtn">Sign Out</button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-container">
            <!-- Left Panel - Command Menu -->
            <aside class="left-panel">
                <div class="panel-inner">
                    <!-- DATABASE CATEGORIES -->
                    <div class="panel-section" id="databaseCategoriesSection">
                        <div class="section-header">
                            <span>CATEGORIES</span>
                            <div class="header-line"></div>
                        </div>
                        <nav class="category-nav" id="categoryNav">
                            <button class="category-item active" data-category="all">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üìã</span>
                                <span class="cat-name">All</span>
                                <span class="cat-count" id="countAll">0</span>
                            </button>
                            <button class="category-item" data-category="piece">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üëó</span>
                                <span class="cat-name">Garments</span>
                                <span class="cat-count" id="countPiece">0</span>
                            </button>
                            <button class="category-item" data-category="collection">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üìö</span>
                                <span class="cat-name">Collections</span>
                                <span class="cat-count" id="countCollection">0</span>
                            </button>
                            <button class="category-item" data-category="designer">
                                <div class="item-selector"></div>
                                <span class="cat-icon">‚ú®</span>
                                <span class="cat-name">Designers</span>
                                <span class="cat-count" id="countDesigner">0</span>
                            </button>
                            <button class="category-item" data-category="house">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üèõÔ∏è</span>
                                <span class="cat-name">Houses</span>
                                <span class="cat-count" id="countHouse">0</span>
                            </button>
                            <button class="category-item" data-category="show">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üé≠</span>
                                <span class="cat-name">Shows</span>
                                <span class="cat-count" id="countShow">0</span>
                            </button>
                            <button class="category-item" data-category="trend">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üí´</span>
                                <span class="cat-name">Trends</span>
                                <span class="cat-count" id="countTrend">0</span>
                            </button>
                        </nav>
                    </div>

                    <!-- CLOSET CATEGORIES -->
                    <div class="panel-section hidden" id="closetCategoriesSection">
                        <div class="section-header">
                            <span>CLOSET</span>
                            <div class="header-line"></div>
                        </div>
                        <nav class="category-nav" id="closetCategoryNav">
                            <button class="category-item closet-cat-item active" data-closet-category="all">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üìã</span>
                                <span class="cat-name">All Items</span>
                                <span class="cat-count" id="closetCountAll">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="tops">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üëï</span>
                                <span class="cat-name">Tops</span>
                                <span class="cat-count" id="closetCountTops">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="bottoms">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üëñ</span>
                                <span class="cat-name">Bottoms</span>
                                <span class="cat-count" id="closetCountBottoms">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="dresses">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üëó</span>
                                <span class="cat-name">Dresses</span>
                                <span class="cat-count" id="closetCountDresses">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="outerwear">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üß•</span>
                                <span class="cat-name">Outerwear</span>
                                <span class="cat-count" id="closetCountOuterwear">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="shoes">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üëü</span>
                                <span class="cat-name">Shoes</span>
                                <span class="cat-count" id="closetCountShoes">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="accessories">
                                <div class="item-selector"></div>
                                <span class="cat-icon">üëú</span>
                                <span class="cat-name">Accessories</span>
                                <span class="cat-count" id="closetCountAccessories">0</span>
                            </button>
                            <button class="category-item closet-cat-item" data-closet-category="favorites">
                                <div class="item-selector"></div>
                                <span class="cat-icon">‚≠ê</span>
                                <span class="cat-name">Favorites</span>
                                <span class="cat-count" id="closetCountFavorites">0</span>
                            </button>
                        </nav>
                    </div>

                    <div class="panel-section">
                        <div class="section-header">
                            <span>TAGS</span>
                            <div class="header-line"></div>
                        </div>
                        <div class="tag-list" id="tagList"></div>
                    </div>

                  <div class="panel-section" id="draftsSection" style="display: none;">
                        <div class="section-header">
                            <span>MY DRAFTS</span>
                            <div class="header-line"></div>
                        </div>
                        <div id="draftsList"></div>
                    </div>

                    <div class="panel-section" id="adminActions">
                        <button class="panel-btn add-btn" id="addEntryBtn">
                            <span class="btn-glow"></span>
                            <span>+ New Entry</span>
                        </button>
                        <button class="panel-btn secondary-btn" id="exportBtn">
                            <span>‚Üì Export</span>
                        </button>
                        <button class="panel-btn secondary-btn" id="importBtn">
                            <span>‚Üë Import</span>
                        </button>
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                    </div>
                </div>
            </aside>

            <!-- Center Panel - Main Content Area -->
            <main class="center-panel">
                <!-- DATABASE PAGE (Default) -->
                <div class="app-page" id="databasePage">
                    <div class="search-section">
                        <div class="search-container">
                            <div class="search-icon">üîç</div>
                            <input type="text" class="search-input" id="searchInput" placeholder="Search entries...">
                            <button class="search-clear" id="searchClear">√ó</button>
                        </div>

                        <div class="filter-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="statTotal">0</span>
                                <span class="stat-label">Total</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="statFiltered">0</span>
                                <span class="stat-label">Filtered</span>
                            </div>
                        </div>
                    </div>

                    <!-- Standard List View -->
                    <div class="list-view" id="listView">
                        <div class="list-scroll" id="listScroll"></div>
                    </div>
                </div>

                <!-- CLOSET PAGE -->
                <div class="app-page hidden" id="closetPage">
                    <div class="search-section">
                        <div class="search-container">
                            <div class="search-icon">üîç</div>
                            <input type="text" class="search-input" id="closetSearchInput" placeholder="Search closet items...">
                            <button class="search-clear" id="closetSearchClear">√ó</button>
                        </div>

                        <div class="filter-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="closetStatTotal">0</span>
                                <span class="stat-label">Total</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="closetStatFiltered">0</span>
                                <span class="stat-label">Filtered</span>
                            </div>
                        </div>

                        <!-- View Mode Toggle for Closet -->
                        <div class="view-mode-toggle" id="closetViewModeToggle">
                            <button class="view-mode-btn active" id="closetViewModeGrid" data-view="grid">
                                ‚ñ¶ Grid
                            </button>
                            <button class="view-mode-btn" id="closetViewModeList" data-view="list">
                                ‚ò∞ List
                            </button>
                        </div>

                        <!-- Add Item Button -->
                        <div class="closet-add-section closet-fab" id="closetAddSection">
                            <button class="panel-btn add-btn" id="addClosetItemBtn">
                                <span class="btn-glow"></span>
                                <span class="btn-icon">+</span>
                                <span class="btn-text">Add Item</span>
                            </button>
                        </div>
                    </div>

                    <!-- Closet Grid View -->
                    <div class="closet-grid-view" id="closetGridView">
                        <div class="closet-grid-scroll" id="closetGridScroll"></div>
                    </div>

                    <!-- Closet List View -->
                    <div class="closet-list-view hidden" id="closetListView">
                        <div class="list-scroll" id="closetListScroll"></div>
                    </div>
                </div>

                <!-- PROFILE PAGE -->
                <div class="app-page hidden" id="profilePage">
                    <div class="profile-container">
                        <!-- Profile Header Section -->
                        <div class="profile-header">
                            <div class="profile-banner" id="profileBanner">
                                <button class="edit-banner-btn" id="editBannerBtn">Edit Banner</button>
                            </div>

                            <div class="profile-top">
                                <div class="profile-pic-wrapper">
                                    <div class="profile-pic" id="profilePic">
                                        <div class="profile-pic-placeholder">üë§</div>
                                    </div>
                                    <button class="edit-pic-btn" id="editPicBtn">Change Photo</button>
                                </div>

                                <div class="profile-info">
                                    <h1 class="profile-name" id="profileName">Guest User</h1>
                                    <div class="profile-status" id="profileStatus">Fashion Enthusiast</div>
                                    <div class="profile-stats">
                                        <div class="stat-box">
                                            <span class="stat-num" id="profileEntriesCount">0</span>
                                            <span class="stat-label">Entries</span>
                                        </div>
                                        <div class="stat-box">
                                            <span class="stat-num" id="profileClosetCount">0</span>
                                            <span class="stat-label">Closet Items</span>
                                        </div>
                                        <div class="stat-box">
                                            <span class="stat-num" id="profileMemberSince">-</span>
                                            <span class="stat-label">Member Since</span>
                                        </div>
                                        <div class="stat-box mood-stat-box" id="moodStatBox" title="Click to change mood">
                                            <span class="stat-num mood-emoji-stat" id="profileMoodEmoji">‚ú®</span>
                                            <span class="stat-label">Current Mood</span>
                                        </div>
                                    </div>
                                </div>

                                <button class="edit-profile-btn" id="editProfileBtn">
                                    <span>‚úé Edit Profile</span>
                                </button>
                            </div>
                        </div>

                        <!-- Profile Content Grid -->
                        <div class="profile-content-grid">
                            <!-- Left Column - About & Interests -->
                            <div class="profile-sidebar">
                                <!-- About Me Section -->
                                <div class="profile-box">
                                    <div class="box-header">
                                        <h3>About Me</h3>
                                    </div>
                                    <div class="box-content">
                                        <p id="profileBio">No bio yet. Click "Edit Profile" to add one!</p>
                                    </div>
                                </div>

                                <!-- Interests Section -->
                                <div class="profile-box">
                                    <div class="box-header">
                                        <h3>Fashion Interests</h3>
                                    </div>
                                    <div class="box-content">
                                        <div class="interest-tags" id="profileInterests">
                                            <span class="interest-tag">Streetwear</span>
                                            <span class="interest-tag">Vintage</span>
                                            <span class="interest-tag">High Fashion</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Favorite Designers -->
                                <div class="profile-box">
                                    <div class="box-header">
                                        <h3>Favorite Designers</h3>
                                    </div>
                                    <div class="box-content">
                                        <div class="favorites-list" id="profileFaveDesigners">
                                            <div class="fave-item">Virgil Abloh</div>
                                            <div class="fave-item">Rei Kawakubo</div>
                                            <div class="fave-item">Yohji Yamamoto</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column - User Content -->
                            <div class="profile-main">
                                <div class="profile-box contributions-box">
                                    <div class="box-header">
                                        <h3>My Contributions</h3>
                                    </div>
                                    <div class="box-content contributions-content">
                                        <div class="contrib-section">
                                            <div class="contrib-section-label">Database Entries</div>
                                            <div class="profile-entries-grid" id="profileEntriesGrid">
                                                <div class="empty-state">
                                                    <div class="empty-icon">üìã</div>
                                                    <div class="empty-text">No database entries yet</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="contrib-section">
                                            <div class="contrib-section-label">Closet Items</div>
                                            <div class="profile-closet-grid" id="profileClosetGrid">
                                                <div class="empty-state">
                                                    <div class="empty-icon">üëî</div>
                                                    <div class="empty-text">No closet items yet</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SOCIAL PAGE -->
                <div class="app-page hidden" id="socialPage">
                    <div class="social-container">
                        <div class="social-header">
                            <h1 class="social-title">Fashion Community</h1>
                            <p class="social-subtitle">Discover styles from fashion enthusiasts around the world</p>
                        </div>

                        <!-- Filter Tabs -->
                        <div class="social-filter-tabs">
                            <button class="social-tab active" data-filter="all">
                                <span class="tab-icon">üåü</span>
                                <span>All</span>
                            </button>
                            <button class="social-tab" data-filter="users">
                                <span class="tab-icon">üë•</span>
                                <span>Users</span>
                            </button>
                            <button class="social-tab" data-filter="entries">
                                <span class="tab-icon">üìã</span>
                                <span>Entries</span>
                            </button>
                            <button class="social-tab" data-filter="closets">
                                <span class="tab-icon">üëî</span>
                                <span>Closets</span>
                            </button>
                        </div>

                        <!-- Social Content -->
                        <div class="social-content" id="socialContent">
                            <!-- Users Section -->
                            <div class="social-section" id="usersSection">
                                <div class="section-header-social">
                                    <h2>Fashion Enthusiasts</h2>
                                    <span class="user-count" id="userCount">0 users</span>
                                </div>
                                <div class="users-grid" id="usersGrid">
                                    <div class="loading-state">
                                        <div class="loading-spinner"></div>
                                        <p>Loading users...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Database Entries Section -->
                            <div class="social-section hidden" id="entriesSection">
                                <div class="section-header-social">
                                    <h2>Database Contributions</h2>
                                    <span class="entry-count-social" id="entryCountSocial">0 entries</span>
                                </div>
                                <div class="entries-social-grid" id="entriesSocialGrid">
                                    <div class="loading-state">
                                        <div class="loading-spinner"></div>
                                        <p>Loading entries...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Closets Section -->
                            <div class="social-section hidden" id="closetsSection">
                                <div class="section-header-social">
                                    <h2>Public Closets</h2>
                                    <span class="closet-count-social" id="closetCountSocial">0 items</span>
                                </div>
                                <div class="closets-social-grid" id="closetsSocialGrid">
                                    <div class="loading-state">
                                        <div class="loading-spinner"></div>
                                        <p>Loading closets...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Right Panel - Entry Cards -->
            <aside class="right-panel">
                <div class="entry-card-view" id="entryCardView">
                    <div class="no-selection">
                        <div class="no-selection-icon">üìÇ</div>
                        <div class="no-selection-text">Select an entry to view details</div>
                    </div>
                </div>

                <div class="entry-detail hidden" id="entryDetail">
                    <div class="detail-header">
                        <button class="back-btn" id="backBtn">
                            <span>‚óÑ</span>
                        </button>
                        <div class="detail-actions detail-edit-actions" id="detailEditActions">
                            <button class="icon-button" id="editBtn">‚úé</button>
                        </div>
                    </div>

                    <div class="detail-content" id="detailContent"></div>
                </div>
            </aside>

        </div>
        
        <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>
    </div>

    <!-- Feedback Panel (Info Button) - outside app-wrapper so it sits above mobile-backdrop -->
    <aside class="activity-panel" id="activityPanel">
        <div class="panel-header">
            <h3 class="panel-title">Feedback</h3>
            <button class="panel-close" id="activityClose">√ó</button>
        </div>
        <div class="activity-scroll" id="activityScroll">
            <div class="feedback-form-section">
                <textarea class="feedback-input" id="feedbackInput" placeholder="Share your thoughts, report bugs, or suggest features..." rows="3" maxlength="500"></textarea>
                <div class="feedback-form-footer">
                    <span class="feedback-char-count" id="feedbackCharCount">0/500</span>
                    <button class="feedback-submit-btn" id="feedbackSubmitBtn">Send</button>
                </div>
            </div>
            <div class="feedback-divider" id="feedbackDivider" style="display: none;">
                <span>SUBMITTED FEEDBACK</span>
            </div>
            <div class="feedback-list" id="feedbackList"></div>
            <div class="panel-credits">
                <span class="credits-label">Created, Designed &amp; Developed by</span>
                <a class="credits-email" href="mailto:ethanfountain03@gmail.com">ethanfountain03@gmail.com</a>
            </div>
        </div>
    </aside>

    <!-- Modal - Add/Edit Entry -->
    <div class="modal-overlay hidden" id="modalOverlay">
        <div class="modal-dialog">
            <div class="corner-accent tl"></div>
            <div class="corner-accent tr"></div>
            <div class="corner-accent bl"></div>
            <div class="corner-accent br"></div>
            
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">New Entry</h2>
                <button class="modal-close" id="modalClose">√ó</button>
            </div>
            
            <div class="modal-body">
                <form id="entryForm" class="entry-form">
                    <div class="form-section">
                        <label class="form-label">Entry Type</label>
                        <div class="type-grid" id="typeGrid">
                            <div class="type-card" data-type="piece">
                                <div class="type-emoji">üëó</div>
                                <div class="type-text">Garment</div>
                            </div>
                            <div class="type-card" data-type="collection">
                                <div class="type-emoji">üìö</div>
                                <div class="type-text">Collection</div>
                            </div>
                            <div class="type-card" data-type="designer">
                                <div class="type-emoji">‚ú®</div>
                                <div class="type-text">Designer</div>
                            </div>
                            <div class="type-card" data-type="house">
                                <div class="type-emoji">üèõÔ∏è</div>
                                <div class="type-text">House</div>
                            </div>
                            <div class="type-card" data-type="show">
                                <div class="type-emoji">üé≠</div>
                                <div class="type-text">Show</div>
                            </div>
                            <div class="type-card" data-type="trend">
                                <div class="type-emoji">üí´</div>
                                <div class="type-text">Trend</div>
                            </div>
                        </div>
                        <input type="hidden" id="entryType" required>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-input" id="entryName" required>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Subtitle</label>
                        <input type="text" class="form-input" id="entrySubtitle" required>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Images</label>
                        <div class="upload-area" id="uploadArea">
                            <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
                            <button type="button" class="upload-btn" id="uploadBtn">
                                üì∑ Upload Images
                            </button>
                            <div class="image-preview-grid" id="imagePreviewGrid"></div>
                        </div>
                    </div>

                    <div id="dynamicFields"></div>

                    <div class="form-section">
                        <label class="form-label">Tags (comma-separated)</label>
                        <input type="text" class="form-input" id="entryTags" placeholder="iconic, vintage, minimalist">
                    </div>

                    <div class="form-section">
                        <label class="form-label">Description</label>
                        <textarea class="form-textarea" id="entryDescription" rows="4" required></textarea>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Cultural Influence</label>
                        <textarea class="form-textarea" id="entryInfluence" rows="3"></textarea>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Techniques</label>
                        <textarea class="form-textarea" id="entryTechniques" rows="3"></textarea>
                    </div>

                   <div class="form-actions">
                        <button type="button" class="form-button delete-btn hidden" id="deleteBtn">Delete</button>
                        <button type="button" class="form-button cancel-btn" id="cancelBtn">Cancel</button>
                        <button type="button" class="form-button draft-btn" id="saveDraftBtn">
                            Save Draft
                        </button>
                        <button type="submit" class="form-button submit-btn" id="submitBtn">
                            <span class="btn-glow"></span>
                            <span>Add Entry</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <!-- Closet Modal - Add/Edit Closet Item -->
    <div class="modal-overlay hidden" id="closetModalOverlay">
        <div class="modal-dialog">
            <div class="corner-accent tl"></div>
            <div class="corner-accent tr"></div>
            <div class="corner-accent bl"></div>
            <div class="corner-accent br"></div>

            <div class="modal-header">
                <h2 class="modal-title" id="closetModalTitle">Add to Closet</h2>
                <button class="modal-close" id="closetModalClose">√ó</button>
            </div>

            <div class="modal-body">
                <form id="closetItemForm" class="entry-form">
                    <!-- IMAGE FIRST -->
                    <div class="form-section">
                        <label class="form-label">Images</label>
                        <div class="upload-area" id="closetUploadArea">
                            <input type="file" id="closetImageInput" accept="image/*" multiple style="display: none;">
                            <input type="file" id="closetCameraInput" accept="image/*" capture="environment" style="display: none;">
                            <div class="upload-buttons">
                                <button type="button" class="upload-btn" id="closetCameraBtn">
                                    üì∏ Take Photo
                                </button>
                                <button type="button" class="upload-btn" id="closetUploadBtn">
                                    üñºÔ∏è Browse Photos
                                </button>
                            </div>
                            <div class="image-preview-grid" id="closetImagePreviewGrid"></div>
                        </div>
                    </div>

                    <!-- ESSENTIAL FIELDS -->
                    <div class="form-section">
                        <label class="form-label">Category</label>
                        <div class="type-grid" id="closetTypeGrid">
                            <div class="type-card" data-closet-type="tops">
                                <div class="type-emoji">üëï</div>
                                <div class="type-text">Tops</div>
                            </div>
                            <div class="type-card" data-closet-type="bottoms">
                                <div class="type-emoji">üëñ</div>
                                <div class="type-text">Bottoms</div>
                            </div>
                            <div class="type-card" data-closet-type="dresses">
                                <div class="type-emoji">üëó</div>
                                <div class="type-text">Dresses</div>
                            </div>
                            <div class="type-card" data-closet-type="outerwear">
                                <div class="type-emoji">üß•</div>
                                <div class="type-text">Outerwear</div>
                            </div>
                            <div class="type-card" data-closet-type="shoes">
                                <div class="type-emoji">üëü</div>
                                <div class="type-text">Shoes</div>
                            </div>
                            <div class="type-card" data-closet-type="accessories">
                                <div class="type-emoji">üëú</div>
                                <div class="type-text">Accessories</div>
                            </div>
                        </div>
                        <input type="hidden" id="closetItemCategory" required>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Item Name</label>
                        <input type="text" class="form-input" id="closetItemName" placeholder="e.g., Vintage Band Tee" required>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Brand / Designer</label>
                        <input type="text" class="form-input" id="closetItemBrand" list="brandSuggestions" placeholder="e.g., Levi's, Zara">
                        <datalist id="brandSuggestions"></datalist>
                    </div>

                    <!-- PRIVACY TOGGLE (always visible) -->
                    <div class="form-section">
                        <div class="privacy-toggle-wrapper">
                            <label class="privacy-toggle">
                                <input type="checkbox" id="closetItemPublic" checked>
                                <span class="privacy-slider"></span>
                                <span class="privacy-label">
                                    <span class="privacy-icon">üåê</span>
                                    <span class="privacy-text">
                                        <strong>Make Public</strong>
                                        <small>Show this item in social feeds</small>
                                    </span>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- COLLAPSIBLE DETAILS -->
                    <div class="form-details-toggle" id="closetDetailsToggle">
                        <span class="toggle-icon">+</span>
                        <span class="toggle-text">Add Details</span>
                    </div>
                    <div class="form-details-section collapsed" id="closetDetailsSection">
                        <div class="form-section">
                            <label class="form-label">Subcategory</label>
                            <input type="text" class="form-input" id="closetItemSubcategory" list="subcategorySuggestions" placeholder="e.g., T-Shirt, Jeans, Sneakers">
                            <datalist id="subcategorySuggestions"></datalist>
                        </div>

                        <div class="form-section">
                            <label class="form-label">Color</label>
                            <input type="text" class="form-input" id="closetItemColor" list="colorSuggestions" placeholder="e.g., Black, Navy Blue">
                            <datalist id="colorSuggestions"></datalist>
                        </div>

                        <div class="form-section">
                            <label class="form-label">Size</label>
                            <input type="text" class="form-input" id="closetItemSize" list="sizeSuggestions" placeholder="e.g., M, 32, 9.5">
                            <datalist id="sizeSuggestions"></datalist>
                        </div>

                        <div class="form-section">
                            <label class="form-label">Tags (comma-separated)</label>
                            <input type="text" class="form-input" id="closetItemTags" placeholder="e.g., casual, summer, vintage">
                        </div>

                        <div class="form-section">
                            <label class="form-label">Description / Notes</label>
                            <textarea class="form-textarea" id="closetItemDescription" rows="3" placeholder="Any notes about this item..."></textarea>
                        </div>

                        <div class="form-section">
                            <label class="form-label">Purchase Date</label>
                            <input type="date" class="form-input" id="closetItemDate">
                        </div>

                        <div class="form-section">
                            <label class="form-label">Purchase Price</label>
                            <input type="number" step="0.01" class="form-input" id="closetItemPrice" placeholder="0.00">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="form-button delete-btn hidden" id="closetDeleteBtn">Delete</button>
                        <button type="button" class="form-button cancel-btn" id="closetCancelBtn">Cancel</button>
                        <button type="submit" class="form-button submit-btn" id="closetSubmitBtn">
                            <span class="btn-glow"></span>
                            <span>Save to Closet</span>
                        </button>
                    </div>
                </form>

                <!-- Success / Add Another -->
                <div class="closet-save-success hidden" id="closetSaveSuccess">
                    <div class="success-icon">‚úì</div>
                    <div class="success-message">Item added to closet!</div>
                    <div class="success-actions">
                        <button type="button" class="form-button cancel-btn" id="closetDoneBtn">Done</button>
                        <button type="button" class="form-button submit-btn" id="closetAddAnotherBtn">
                            <span class="btn-glow"></span>
                            <span>+ Add Another</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MOBILE MENU - NEW SEPARATE SYSTEM -->
        <div class="mobile-menu-container" id="mobileMenuContainer">
            <div class="mobile-menu-header">
                <div class="mobile-menu-title">MENU</div>
                <button class="mobile-menu-close" id="mobileMenuClose">‚úï</button>
            </div>
            <div class="mobile-menu-content" id="mobileMenuContent">
                <!-- Content will be cloned from left panel -->
            </div>
        </div>

        <div class="mobile-detail-overlay" id="mobileDetailOverlay">
            <!-- Entry detail will be rendered here on mobile -->
        </div>

        <div class="mobile-backdrop" id="mobileBackdrop"></div>

        <!-- Mobile Bottom Navigation -->
        <nav class="mobile-bottom-nav" id="mobileBottomNav">
            <button class="bottom-nav-btn active" data-page="database">
                <span class="nav-icon">üìã</span>
                <span class="nav-label">Database</span>
            </button>
            <button class="bottom-nav-btn" data-page="closet">
                <span class="nav-icon">üëî</span>
                <span class="nav-label">Closet</span>
            </button>
            <button class="bottom-nav-btn" data-page="social">
                <span class="nav-icon">üåê</span>
                <span class="nav-label">Social</span>
            </button>
            <button class="bottom-nav-btn" data-page="profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">Profile</span>
            </button>
        </nav>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal-overlay hidden" id="profileModalOverlay">
        <div class="modal-dialog profile-modal-dialog">
            <div class="corner-accent tl"></div>
            <div class="corner-accent tr"></div>
            <div class="corner-accent bl"></div>
            <div class="corner-accent br"></div>

            <div class="modal-header">
                <h2 class="modal-title">Edit Profile</h2>
                <button class="modal-close" id="profileModalClose">√ó</button>
            </div>

            <div class="modal-body">
                <form id="profileForm" class="entry-form">
                    <div class="form-section">
                        <label class="form-label">Profile Picture</label>
                        <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
                        <button type="button" class="upload-btn" id="profilePicUploadBtn">
                            üì∑ Upload Profile Picture
                        </button>
                        <div class="image-preview-single" id="profilePicPreview"></div>
                        <div class="form-hint">Recommended: Square image, at least 150x150px</div>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Banner Image</label>
                        <input type="file" id="profileBannerInput" accept="image/*" style="display: none;">
                        <button type="button" class="upload-btn" id="profileBannerUploadBtn">
                            üì∑ Upload Banner Image
                        </button>
                        <div class="image-preview-single" id="profileBannerPreview"></div>
                        <div class="form-hint">Recommended size: 1200x300px or wider</div>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Display Name</label>
                        <input type="text" class="form-input" id="profileDisplayName" placeholder="Your name">
                    </div>

                    <div class="form-section">
                        <label class="form-label">Status/Tagline</label>
                        <input type="text" class="form-input" id="profileTagline" placeholder="e.g., Fashion Enthusiast, Style Icon">
                    </div>

                    <div class="form-section">
                        <label class="form-label">About Me</label>
                        <textarea class="form-textarea" id="profileBioEdit" rows="4" placeholder="Tell us about yourself..."></textarea>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Fashion Interests (comma-separated)</label>
                        <input type="text" class="form-input" id="profileInterestsEdit" placeholder="e.g., Streetwear, Vintage, High Fashion">
                    </div>

                    <div class="form-section">
                        <label class="form-label">Favorite Designers (comma-separated)</label>
                        <input type="text" class="form-input" id="profileDesignersEdit" placeholder="e.g., Virgil Abloh, Rei Kawakubo">
                    </div>

                    <div class="form-section">
                        <label class="form-label">Current Mood</label>
                        <div class="mood-selector">
                            <select class="form-input" id="profileMoodEmoji">
                                <option value="‚ú®">‚ú® Inspired</option>
                                <option value="üî•">üî• On Fire</option>
                                <option value="üíé">üíé Luxe</option>
                                <option value="üåü">üåü Shining</option>
                                <option value="üòé">üòé Cool</option>
                                <option value="üí´">üí´ Dreaming</option>
                                <option value="üé®">üé® Creative</option>
                                <option value="üëë">üëë Royalty</option>
                            </select>
                            <input type="text" class="form-input" id="profileMoodText" placeholder="Mood description">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="form-button cancel-btn" id="profileCancelBtn">Cancel</button>
                        <button type="submit" class="form-button submit-btn" id="profileSubmitBtn">
                            <span class="btn-glow"></span>
                            <span>Save Profile</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Profile Onboarding Modal -->
    <div class="modal-overlay hidden" id="onboardingOverlay">
        <div class="modal-dialog onboarding-dialog">
            <div class="corner-accent tl"></div>
            <div class="corner-accent tr"></div>
            <div class="corner-accent bl"></div>
            <div class="corner-accent br"></div>

            <div class="onboarding-header">
                <div class="onboarding-welcome">Welcome to FashionDex</div>
                <div class="onboarding-subtitle">Let's set up your profile</div>
                <div class="onboarding-steps-indicator">
                    <div class="step-dot active" data-step="1"><span>1</span></div>
                    <div class="step-line"></div>
                    <div class="step-dot" data-step="2"><span>2</span></div>
                    <div class="step-line"></div>
                    <div class="step-dot" data-step="3"><span>3</span></div>
                </div>
            </div>

            <div class="modal-body onboarding-body">
                <!-- Step 1: Basics -->
                <div class="onboarding-step active" id="onboardStep1">
                    <div class="step-title">Who are you?</div>
                    <div class="step-description">Tell the community a bit about yourself</div>

                    <div class="form-section">
                        <label class="form-label">Display Name</label>
                        <input type="text" class="form-input" id="onboardDisplayName" placeholder="Your name or alias">
                    </div>

                    <div class="form-section">
                        <label class="form-label">Status / Tagline</label>
                        <input type="text" class="form-input" id="onboardTagline" placeholder="e.g., Streetwear Enthusiast, Vintage Collector">
                    </div>

                    <div class="form-section">
                        <label class="form-label">About Me</label>
                        <textarea class="form-textarea" id="onboardBio" rows="3" placeholder="What's your fashion story?"></textarea>
                    </div>
                </div>

                <!-- Step 2: Photo -->
                <div class="onboarding-step" id="onboardStep2">
                    <div class="step-title">Show yourself</div>
                    <div class="step-description">Add a profile picture so others can recognize you</div>

                    <div class="form-section">
                        <label class="form-label">Profile Picture</label>
                        <div class="onboarding-photo-area">
                            <div class="onboarding-photo-preview" id="onboardPhotoPreview">
                                <div class="photo-placeholder">üë§</div>
                            </div>
                            <input type="file" id="onboardPhotoInput" accept="image/*" style="display: none;">
                            <div class="upload-buttons">
                                <button type="button" class="upload-btn" id="onboardPhotoCameraBtn">
                                    üì∏ Take Photo
                                </button>
                                <button type="button" class="upload-btn" id="onboardPhotoBrowseBtn">
                                    üñºÔ∏è Browse
                                </button>
                            </div>
                            <input type="file" id="onboardCameraInput" accept="image/*" capture="environment" style="display: none;">
                        </div>
                    </div>
                </div>

                <!-- Step 3: Interests -->
                <div class="onboarding-step" id="onboardStep3">
                    <div class="step-title">What inspires you?</div>
                    <div class="step-description">Help us connect you with like-minded fashion enthusiasts</div>

                    <div class="form-section">
                        <label class="form-label">Fashion Interests</label>
                        <input type="text" class="form-input" id="onboardInterests" placeholder="e.g., Streetwear, Vintage, High Fashion, Techwear">
                        <div class="onboarding-tag-suggestions" id="onboardInterestSuggestions">
                            <button type="button" class="tag-suggestion" data-value="Streetwear">Streetwear</button>
                            <button type="button" class="tag-suggestion" data-value="Vintage">Vintage</button>
                            <button type="button" class="tag-suggestion" data-value="High Fashion">High Fashion</button>
                            <button type="button" class="tag-suggestion" data-value="Minimalist">Minimalist</button>
                            <button type="button" class="tag-suggestion" data-value="Techwear">Techwear</button>
                            <button type="button" class="tag-suggestion" data-value="Avant-Garde">Avant-Garde</button>
                            <button type="button" class="tag-suggestion" data-value="Y2K">Y2K</button>
                            <button type="button" class="tag-suggestion" data-value="Workwear">Workwear</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <label class="form-label">Favorite Designers</label>
                        <input type="text" class="form-input" id="onboardDesigners" placeholder="e.g., Virgil Abloh, Rei Kawakubo, Rick Owens">
                    </div>
                </div>
            </div>

            <div class="onboarding-footer">
                <button type="button" class="form-button cancel-btn" id="onboardSkipBtn">Skip for now</button>
                <div class="onboarding-nav-buttons">
                    <button type="button" class="form-button cancel-btn hidden" id="onboardBackBtn">Back</button>
                    <button type="button" class="form-button submit-btn" id="onboardNextBtn">
                        <span class="btn-glow"></span>
                        <span id="onboardNextText">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Social Entry / Closet Detail Modal -->
    <div class="modal-overlay hidden" id="socialDetailModal">
        <div class="modal-dialog social-detail-dialog">
            <div class="modal-header">
                <div class="modal-title" id="socialDetailTitle"></div>
                <button class="modal-close" onclick="closeSocialDetailModal()">√ó</button>
            </div>
            <div class="modal-body" id="socialDetailBody"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>